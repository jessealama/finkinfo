Info3: <<
Package: ledger
Version: 3.0.3
Revision: 1
Source: https://github.com/ledger/ledger/archive/v%v.tar.gz
Maintainer: Jesse Alama <jesse.alama@gmail.com>
Homepage: http://ledger-cli.org/
License: BSD
Description: Maintain double-entry ledgers
Source-MD5: 481ef13c0ccfc5466ffc446672d492a5
PatchFile: %n.patch
PatchFile-MD5: fc76e86bd5118ba380dc55717933e2cb
PatchScript: sed 's|@PREFIX@|%p|g' < %{PatchFile} | patch -p1
BuildDepends: <<
  gmp5,
  libpcre1,
  libicu48-dev,
  libmpfr4,
  expat1,
  opensp5-dev,
  libgettext8-dev,
  libiconv-dev,
  cmake,
  boost1.53.nopython | boost1.53.python27 | boost1.53.python32 | boost1.53.python33 | boost1.53.systempython,
  fink (>= 0.24.12),
  gmp5-shlibs,
  libpcre1-shlibs,
<<
GCC: 4.0
Shlibs: %p/lib/libledger.3.dylib 3.0.0 %n-shlibs (>= 3.0.3-1)
SourceDirectory: %n-%v
Depends: <<
  libicu48-shlibs,
  libmpfr4-shlibs,
  expat1-shlibs,
  opensp5-shlibs,
  libgettext8-shlibs,
  libiconv,
  %n-shlibs,
  boost1.53.nopython-shlibs | boost1.53.python27-shlibs | boost1.53.python32-shlibs | boost1.53.python33-shlibs | boost1.53.systempython-shlibs,
<<
Suggests: gnuplot
SetCXXFLAGS: -I%p/include
InfoDocs: ledger
CompileScript: <<
  ./acprep --boost-include=%p/include/boost-1_53/include --boost-suffix=-mt config
  ./acprep --boost-include=%p/include/boost-1_53/include --boost-suffix=-mt make
  /usr/bin/makeinfo doc/ledger3.texi
  /usr/bin/makeinfo doc/ledger-mode.texi
<<
InstallScript: <<
  # doc (man, info)
  mkdir -p %i/share/man/man1
  install -m 644 doc/ledger.1 %i/share/man/man1
  mkdir -p %i/share/info
  find doc -mindepth 1 -maxdepth 1 -type f -name 'ledger3.info*' -exec install -m 644 {} %i/share/info/ ';'
  find doc -mindepth 1 -maxdepth 1 -type f -name 'ledger-mode.info*' -exec install -m 644 {} %i/share/info/ ';'
  # emacs
  mkdir -p %i/share/emacs/site-lisp/ledger
  find lisp -mindepth 1 -maxdepth 1 -type f -name '*.el' -exec install -m 644 {} %i/share/emacs/site-lisp/ledger ';'
  mkdir -p %i/lib/emacsen-common/packages/install
  mkdir -p %i/lib/emacsen-common/packages/remove
  install -m 755 fink/emacsen-install %i/lib/emacsen-common/packages/install/%n
  install -m 755 fink/emacsen-remove %i/lib/emacsen-common/packages/remove/%n
  mkdir -p %i/etc/emacs/site-start.d
  install -m 644 fink/50ledger.el %i/etc/emacs/site-start.d
  # dylibs
  mkdir -p %i/lib
  install -m 644 libledger.3.dylib %i/lib
<<
DocFiles: doc/LICENSE doc/LICENSE-utfcpp doc/grammar.y doc/GLOSSARY.md doc/NEWS
DescDetail: <<
Ledger is a command-line accounting tool for maintaing doubly-entry
ledgers.  The syntax for ledger files is simple (see the file
`sample.dat' in the `examples' subdirectory of the Ledger
documentation directory) and can be maintained using only a text
editor.
<<
SplitOff: <<
  Package: ledger-el
  Depends: emacsen-common, ledger
  Description: Maintain a double-entry ledger with Emacs
  Files: <<
    share/emacs/site-lisp/ledger/*.el
    lib/emacsen-common/packages/install/%N
    lib/emacsen-common/packages/remove/%N
    etc/emacs/site-start.d/50ledger.el
  <<
  PreRmScript: <<
    mkdir -p %p/share/doc/ledger-el
    %p/lib/emacsen-common/emacs-package-remove %n
  <<
  PostInstScript: <<
    mkdir -p %p/share/doc/ledger-el
    %p/lib/emacsen-common/emacs-package-install %n
  <<
  DescDetail: <<
Issue the command `M-x ledger-mode' when you're visiting ledger files
to turn on ledger mode.  A useful tip: put a file-local variable

; -*- mode: ledger-mode; -*-

into the top or bottom of your ledger files to get emacs to
automatically turn on ledger-mode when visiting ledger files.
<<
<<
<<